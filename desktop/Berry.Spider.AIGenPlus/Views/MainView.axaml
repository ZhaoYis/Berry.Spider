<UserControl
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d"
    x:Class="Berry.Spider.AIGenPlus.Views.MainView"
    x:CompileBindings="True"
    x:DataType="vm:MainViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pages="clr-namespace:Berry.Spider.AIGenPlus.Views.Pages"
    xmlns:vm="using:Berry.Spider.AIGenPlus.ViewModels"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceInclude Source="../Themes/TabMenu.axaml" />
                <ResourceInclude Source="../Themes/ToggleSwitch.axaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid RowDefinitions="Auto, *">
        <Border
            Grid.Row="0"
            Margin="8"
            Padding="12,4"
            Theme="{DynamicResource CardBorder}">
            <Panel>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <ToggleSwitch Name="ExpandButton" Theme="{DynamicResource SplitViewToggleSwitch}" />
                    <SelectableTextBlock
                        Classes="H6"
                        Text="AIGenPlus"
                        Theme="{DynamicResource TitleSelectableTextBlock}"
                        VerticalAlignment="Center" />
                    <SelectableTextBlock Text="/" VerticalAlignment="Center" />
                    <SelectableTextBlock
                        Classes="Secondary"
                        Text="{ReflectionBinding #tab.SelectedItem.Header}"
                        VerticalAlignment="Center" />
                </StackPanel>
                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                    <StackPanel.Styles>
                        <Style Selector="Button">
                            <Setter Property="Theme" Value="{DynamicResource BorderlessButton}" />
                            <Setter Property="Padding" Value="8" />
                            <Setter Property="Foreground" Value="{DynamicResource ButtonDefaultTertiaryForeground}" />
                        </Style>
                        <Style Selector="ToggleSwitch">
                            <Setter Property="Theme" Value="{DynamicResource ThemeToggleSwitch}" />
                            <Setter Property="Foreground" Value="{DynamicResource ButtonDefaultTertiaryForeground}" />
                        </Style>
                        <Style Selector="PathIcon">
                            <Setter Property="Theme" Value="{DynamicResource InnerPathIcon}" />
                        </Style>
                    </StackPanel.Styles>

                    <Button Command="{Binding OpenUrlCommand}" CommandParameter="{Binding DocumentationUrl}">
                        <PathIcon Data="{StaticResource SemiIconGlobe}" />
                    </Button>

                    <Button Command="{Binding OpenUrlCommand}" CommandParameter="{Binding RepoUrl}">
                        <PathIcon Data="{StaticResource SemiIconGithubLogo}" />
                    </Button>

                    <ToggleSwitch
                        Command="{Binding ToggleThemeCommand}"
                        OffContent="{StaticResource SemiIconSun}"
                        OnContent="{StaticResource SemiIconMoon}" />

                    <Button>
                        <PathIcon Data="{StaticResource SemiIconMenu}" />
                        <Button.Flyout>
                            <MenuFlyout ItemsSource="{Binding MenuItems}" Placement="Bottom" />
                        </Button.Flyout>
                        <Button.Styles>
                            <Style Selector="MenuItem" x:DataType="vm:MenuItemViewModel">
                                <Setter Property="Header" Value="{Binding Header}" />
                                <Setter Property="ItemsSource" Value="{Binding Items}" />
                                <Setter Property="Command" Value="{Binding Command}" />
                                <Setter Property="CommandParameter" Value="{Binding CommandParameter}" />
                            </Style>
                        </Button.Styles>
                    </Button>
                </StackPanel>
            </Panel>
        </Border>
        <TabControl
            Classes.Dismiss="{Binding #ExpandButton.IsChecked}"
            Grid.Row="1"
            HorizontalAlignment="Stretch"
            Margin="8"
            Name="tab"
            Padding="20,0,0,0"
            TabStripPlacement="Left"
            Theme="{DynamicResource NavigationTab}">
            <TabItem Header="HomePage">
                <pages:HomePage />
            </TabItem>
            <TabItem Header="AiChat">
                <pages:AiChat />
            </TabItem>
            <TabItem Header="AiGroupChat">
                <pages:AiGroupChat />
            </TabItem>
            <TabItem Header="Function Call">
                <pages:FunctionCall />
            </TabItem>
            <TabItem Header="Text Embedding">
                <pages:Embedding />
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>